/**
 * @author Zack Perdue / Ziggidy Creative 
 * http://zackperdue.com
 * http://ziggidycreative.com
 *
 * Version 0.1
 * Copyright (c) 2011 Ziggidy Creative
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 */

(function(a){a.fn.limit=function(d){var c={max:2000,debug:false,counter:null,elementSelector:"limit-count",updateView:null,};if(d){a.extend(c,d)}var b={init:function(){b.log("Initializing");el.bind("keyup.limit",b.update);if(typeof c.counter==="function"){c.counter.call(this,c)}else{countElement=a("<span />").addClass(c.elementSelector);el.after(countElement)}b.update();b.log("Terminating")},count:function(){return textareaValue.split(/[\S\s\W]+?/g).length-1},update:function(){textareaValue=el.val();count=b.count();remaining=c.max-count;b.log(count);if(b.check()){el.val(b.replace())}b.updateView()},replace:function(){return textareaValue.substr(0,c.max)},check:function(){result=!(c.max>=count);b.log("Over Limit? "+result);return result},updateView:function(){if(typeof c.updateView==="function"){c.updateView.call()}else{text=remaining+((remaining==1)?" Character Remains":" Characters Remain");countElement.text(text)}b.log("Updating View")},log:function(e){if(c.debug){console.log(e)}}};return this.each(function(e){el=a(this);limit=parseInt(el.data("limit"));if(limit>0){c.max=limit}b.log(c);b.init()})}})(jQuery);